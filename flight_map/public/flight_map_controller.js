// public parts of the plugin (i.e. parts that reside in the public folder and will be transfered to the client)
// must be AMD modules (RequireJS)
define(function(require) {

	// Include our custom CSS (LESS also works)
	//require('plugins/tr-k4p-clock/clock.css');

	// Create an Angular module for this plugin
	var module = require('ui/modules').get('flight_map', ['kibana']);
    var L = require('leaflet');
    require('angular-leaflet-directive');
    require('jquery');

	// Add a controller to this module
	module.controller('FlightMapController', function($scope) {

		var setTime = function() {
			$scope.time = Date.now();
		};
		setTime();

		//var geo_json = {};
		//var map_data = '{"type":"FeatureCollection","features":[{"type":"Feature","id":"JPN","properties":{"name":"Japan"},"geometry":{"type":"MultiPolygon","coordinates":[[[[134.638428,34.149234],[134.766379,33.806335],[134.203416,33.201178],[133.79295,33.521985],[133.280268,33.28957],[133.014858,32.704567],[132.363115,32.989382],[132.371176,33.463642],[132.924373,34.060299],[133.492968,33.944621],[133.904106,34.364931],[134.638428,34.149234]]],[[[140.976388,37.142074],[140.59977,36.343983],[140.774074,35.842877],[140.253279,35.138114],[138.975528,34.6676],[137.217599,34.606286],[135.792983,33.464805],[135.120983,33.849071],[135.079435,34.596545],[133.340316,34.375938],[132.156771,33.904933],[130.986145,33.885761],[132.000036,33.149992],[131.33279,31.450355],[130.686318,31.029579],[130.20242,31.418238],[130.447676,32.319475],[129.814692,32.61031],[129.408463,33.296056],[130.353935,33.604151],[130.878451,34.232743],[131.884229,34.749714],[132.617673,35.433393],[134.608301,35.731618],[135.677538,35.527134],[136.723831,37.304984],[137.390612,36.827391],[138.857602,37.827485],[139.426405,38.215962],[140.05479,39.438807],[139.883379,40.563312],[140.305783,41.195005],[141.368973,41.37856],[141.914263,39.991616],[141.884601,39.180865],[140.959489,38.174001],[140.976388,37.142074]]],[[[143.910162,44.1741],[144.613427,43.960883],[145.320825,44.384733],[145.543137,43.262088],[144.059662,42.988358],[143.18385,41.995215],[141.611491,42.678791],[141.067286,41.584594],[139.955106,41.569556],[139.817544,42.563759],[140.312087,43.333273],[141.380549,43.388825],[141.671952,44.772125],[141.967645,45.551483],[143.14287,44.510358],[143.910162,44.1741]]]]}}]}';
		//geo_json.data = jQuery.parseJSON(map_data);
		//geo_json.style = {
         //               fillColor: "green",
         //               weight: 2,
         //               opacity: 1,
         //               color: 'white',
         //               dashArray: '3',
         //               fillOpacity: 0.7
         //           };
		//$scope.map_data = geo_json;
		//$scope.japan = {lat: 27.26,lng: 78.86,zoom: 4};

		angular.extend($scope, {
                center: {
                    lat: 51.505,
                    lng: -0.09,
                    zoom: 3
                },
                paths: {}
            });

        $scope.paths['p1'] = {type: "polyline",color: '#FF0000',weight: 8,opacity: 1.0,
                            latlngs: [ [41.23, 29.18],[41.26, 29.24],[41.28, 29.3],[41.31, 29.36],[41.34, 29.43],[41.37, 29.49],[41.4, 29.56],[41.43, 29.63],[41.45, 29.7]]
                        };
        $scope.paths['p2'] = {type: "polyline",color: '#00FF33',weight: 8,opacity: 1.0,
                            latlngs: [ [41.47, 29.77],[41.49, 29.85],[41.51, 29.93],[41.52, 30.02],[41.54, 30.1],[41.56, 30.19],[41.57, 30.27],[41.59, 30.36],[41.61, 30.45],[41.62, 30.53]]
                        };
	});

});